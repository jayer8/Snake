<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html >
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title>Snake</title>
		<script type="text/javascript" src="js/Game.js"></script>
		<script type="text/javascript" src="js/Square.js"></script>
		<script type="text/javascript" src="js/Snake.js"></script>
		
		<script>
			var game;
			
			/**
			 * Inicia una nueva instancia de la clase Game, enlaza los eventos del teclado
			 * y pinta el escenario de acuerdo a la velocidad en el objeto Game.
			 */
			function start() {
				game = new Game("context");
				document.onkeydown = function(e) {
					game.keyPress(e);
				};
				game.setTimer(setInterval("game.launch();", 1000 / game.getSpeed()));
			}
			
			/**
			 * Muestra un mensaje en la página web.
			 * @param {Object} text		Mensaje a mostrar.
			 * @param {Object} newLine	Si es true inserta un nuevo salto de línea antes del mensaje.
			 */
			function log(text, newLine) {
				var layer = document.getElementById("log");
				if (newLine) {
					layer.innerHTML += "<br />" + text;
				}
				else {
					layer.innerHTML = text;
				}
			}
			
			/**
			 * Detiene la ejecución del juego.
			 */
			function stop() {
				clearInterval(game.getTimer());
			}
		</script>
	</head>

	<body onload="start();">
		<canvas id="context"> </canvas>
		<br />
		<ul>
			<li><code>Cursores</code> para mover la serpiente hacia arriba, abajo, derecha e izquierda.</li>
			<li><code>Entrar</code> para empezar de nuevo cuando finalice la partida.</li>
		</ul>
		<p>Basado en:
			<a href="http://cssdeck.com/labs/classic-snake-game-with-html5-canvas">
				cssdeck.com/labs/classic-snake-game-with-html5-canvas
			</a> y<br />
			<a href="http://thecodeplayer.com/walkthrough/html5-game-tutorial-make-a-snake-game-using-html5-canvas-jquery">
				thecodeplayer.com/walkthrough/html5-game-tutorial-make-a-snake-game-using-html5-canvas-jquery
			</a>
		</p>
		<button onclick="stop();">Parar</button>
		<div id="log"> </div>
	</body>
</html>